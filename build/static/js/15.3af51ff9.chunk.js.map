{"version":3,"sources":["views/platform/Panier.js"],"names":["Panier","auth","useAuthUser","authHeader","useAuthHeader","useState","aalert","setAlert","token","localStorage","getItem","headers","console","log","StyledBadge","styled","Badge","theme","top","border","palette","background","paper","padding","useCart","emptyCart","isEmpty","items","totalUniqueItems","updateItemQuantity","removeItem","cartTotal","component","sx","overflow","color","orange","fontSize","marginBottom","marginTop","variant","severity","bgcolor","container","spacing","xs","md","columns","sm","alignContent","justifyContent","item","onClick","e","preventDefault","axios","all","post","put","then","res","status","setTimeout","catch","map","boxShadow","badgeContent","quantity","nom","direction","marginLeft","type","price","id","borderRadius"],"mappings":"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","file":"static/js/15.3af51ff9.chunk.js","sourcesContent":["import React, {useState} from 'react';\nimport {useCart} from \"react-use-cart\";\nimport axios from \"axios\";\nimport Button from \"@mui/material/Button\";\nimport {useAuthHeader, useAuthUser} from \"react-auth-kit\";\nimport Card from \"@mui/material/Card\";\nimport {Alert, AlertTitle, Badge, Grid, Stack} from \"@mui/material\";\nimport CardContent from \"@mui/material/CardContent\";\nimport AddIcon from '@mui/icons-material/Add';\nimport RemoveIcon from '@mui/icons-material/Remove';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport ShoppingCartIcon from '@mui/icons-material/ShoppingCart';\nimport Box from \"@mui/material/Box\";\nimport IconButton from \"@mui/material/IconButton\";\nimport {styled} from \"@mui/material/styles\";\nimport {orange} from \"@mui/material/colors\";\n\n\nfunction Panier() {\n    const auth = useAuthUser()\n    const authHeader = useAuthHeader()\n\n    const [aalert,setAlert]=useState(false)\n    const [c, setC] = useState(0);\n    const url = `https://admin.allcine227.com/api/commandes`\n    const token = localStorage.getItem('token')\n    const headers = {\n        'authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json',\n        'Accept': 'application/json'\n    }\n    console.log(auth)\n    console.log(authHeader)\n\n    const onSubmit = (e) => {\n        e.preventDefault()\n        axios.all([\n            axios.post(\n            url,\n            {\"panier\": {items, cartTotal}},\n            {headers: headers}\n        ),\n        axios.put()\n        ])\n\n            .then((res) => {\n                if (res.status === 201) {\n                    emptyCart()\n                    setAlert(true)\n                    setTimeout(()=>{setAlert(false)},5000);\n                } else {\n\n                }\n            }).catch(\n            function () {\n\n            })\n    }\n    const nb = (type) => {\n        return Math.floor(items.reduce((acc, arr) => acc + (arr.type === type ? 1 : 0), 0) / 5) * 500\n    }\n\n    const StyledBadge = styled(Badge)(({theme}) => ({\n        '& .MuiBadge-badge': {\n            top: 5,\n            border: `1px solid ${theme.palette.background.paper}`,\n            padding: '0 4px',\n        },\n    }));\n    const {\n        emptyCart,\n        isEmpty,\n        totalUniqueItems,\n        items,\n        updateItemQuantity,\n        removeItem,\n        cartTotal,\n    } = useCart();\n    if (isEmpty) return  <Box component=\"div\" sx={{overflow: 'auto', color: orange[900], fontSize: 22, marginBottom:2,marginTop:2}}>\n        {aalert ?<Alert variant=\"filled\" severity=\"success\">\n            <AlertTitle>Panier Envoyez avez succ√®s</AlertTitle>\n            Vous recevrais votre commande le plus vite possible\n        </Alert>:null}\n        Votre panier est vide\n    </Box>;\n    return (\n        <Box bgcolor={\"white\"}>\n            <Grid container spacing={{xs: 1, md: 1}} columns={{xs: 12, sm: 12, md: 12}} alignContent={\"center\"}\n                  justifyContent={'center'}>\n                <Grid item xs={12} sm={6} md={12}>\n                    <Box component=\"div\" sx={{overflow: 'auto', color: orange[900], fontSize: 22, marginBottom:2,marginTop:2}}>\n                        Prix Total {cartTotal} CFA\n                    </Box>\n                        <Button variant={\"contained\"} onClick={onSubmit}>envoyez la commande</Button>\n                </Grid>\n            </Grid>\n            {items.map((item) => (\n                <Card>\n                    <CardContent\n                        sx={{boxShadow: 3, bgcolor: 'grey.200', marginBottom: 2, justifyContent: 'center'}}>\n                        <Box component=\"div\" sx={{overflow: 'auto'}}>\n                            <IconButton aria-label=\"cart\">\n                                <StyledBadge badgeContent={item.quantity} color=\"secondary\">\n                                    <ShoppingCartIcon fontSize={\"large\"}/>\n                                </StyledBadge>\n                            </IconButton> {item.nom}\n                        </Box>\n                        <Stack spacing={3} direction=\"row\" sx={{marginLeft: 7, marginTop: 0}}>\n                            <Box component=\"div\"\n                                 sx={{\n                                     overflow: 'auto',\n                                     fontSize: 14,\n                                     color:orange[800],\n                                 }}>\n                                {item.type + ':' + item.price + \" CFA\"}</Box>\n                            {item.type === 'products' ?\n                                <><RemoveIcon onClick={() => updateItemQuantity(item.id, item.quantity - 1)}\n                                              sx={{color: \"blue\", borderRadius: 3}}/>\n                                    <AddIcon onClick={() => updateItemQuantity(item.id, item.quantity + 1)}\n                                             sx={{color: \"blue\", borderRadius: 3}}/></>\n                                : null}\n                            <DeleteIcon onClick={() => removeItem(item.id)}\n                                        sx={{color: \"red\", borderRadius: 3}}/>\n                        </Stack>\n                    </CardContent>\n\n                </Card>\n            ))}\n\n        </Box>\n    )\n        ;\n}\n\n\nexport default Panier\n"],"sourceRoot":""}